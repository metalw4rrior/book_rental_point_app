{% extends 'base.html' %}

{% block title %}Книги по жанрам{% endblock %}

{% block content %}
<h2>Книги по жанрам</h2>

<div style="margin-bottom: 1rem;">
    <a class="btn" href="{{ url_for('report_bp.books_by_genre_report', export='csv') }}">Экспорт в CSV</a>
</div>

{% if chart_img %}
    <div style="text-align: center; margin-bottom: 2rem;">
        <img src="data:image/png;base64,{{ chart_img }}" alt="График по жанрам" style="max-width: 100%; height: auto; border: 1px solid #444; border-radius: 8px;">
    </div>
{% endif %}

<table>
    <thead>
        <tr>
            <th>Жанр</th>
            <th>Количество книг</th>
        </tr>
    </thead>
    <tbody>
        {% for genre, count in genre_counts %}
        <tr>
            <td>{{ genre or "Не указан" }}</td>
            <td>{{ count }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
